

### 트랜잭션 동시 실행 문제

| T1   | T2   | 발생 문제                                   | 동시 접근         |
| ---- | ---- | ------------------------------------------- | ----------------- |
| 읽기 | 쓰기 | 오손 읽기, 반복불가능 읽기, 유령데이터 읽기 | 허용/불가 중 선택 |

T1에서 읽기만 하므로 갱신손실 같은 심각한 문제는 발생하지 않는다. 그러나 오손 읽기, 반복불가능 읽기, 유령데이터 읽기 문제 등이 발생할 수 있다.

#### 오손 읽기

T2가 작업하는 중간 데이터를 T1이 읽기 때문에 생기는 문제로, T2가 작업을 철회 할 경우 T1는 무효가 된 데이터를 읽게 되는 잘못된 결과를 도출

##### 오손 읽기 해결

COMMIT 을 하지 않은 데이터는 다른 드랜잭션이 읽지 못하도록 한다.



#### 반복불가능 읽기

T1이 데이터를 읽고 작업한는 중 T2가 데이터를 갱신, T1은 변경한 데이터를 다시 읽을 때 값이 다른 현상. 같은 SQL문에 다른 결과 도출



#### 유령데이터 읽기

T1이 데이터를 읽고 T2가 데이터를 INSERT, T1이 다시 한 번 데이터를 읽을 때 생기는 문제. T1이 읽기 작업을 다시 한 번 반복할 경우 이전에 없던 데이터가 나타나는 현상. 같은 SQL문에 다른 결과 도출



### 트랜잭션 고립 수준 명령어

DBMS에서 락보다 완화된 방법으로 문제를 해결하는 명령어를 제공한다.

명령어를 사용하면 사용자가 어느 정도 선택하여 트랜잭션을 제어할 수 있다.

| 고립수준         | 오손 읽기 | 반복불가능 읽기 | 유령데이터 읽기 | Level |
| ---------------- | --------- | --------------- | --------------- | ----- |
| READ UNCOMMITTED | 가능      | 가능            | 가능            | 0     |
| READ COMMITTED   | 불가능    | 가능            | 가능            | 1     |
| REPEATABLE READ  | 불가능    | 불가능          | 가능            | 2     |
| SERIALIZABLE     | 불가능    | 불가능          | 불가능          | 3     |



#### READ UNCOMMITTED

- **LOCK**

	- SELECT - 공유락LS 걸지 않음

	- UPDATE - 배타락LX 설정

	- 다른 트랜잭션의 공유락과 베타락이 걸린 데이터를 읽음

- **SQL**

	- SET TRACSACTION ISOLATION LEVEL READ UNCOMMITTED

- **문제점**

	- 오손 읽기, 반복불가능 읽기, 유령데이터 읽기

#### READ COMMITTED

- **LOCK**

	- SELECT - 공유락LS 걸고 끝나면 바로 해지

	- UPDATE - 배타락LX 설정

	- 다른 트랜잭션이 설정한 공유락은 읽지만 베타락은 읽지 못함

- **SQL**

	- SET TRACSACTION ISOLATION LEVEL READ COMMITTED

- **문제점**

	- 반복불가능 읽기, 유령데이터 읽기

#### REPEATABLE READ

- **LOCK**

	- SELECT - 공유락LS 걸고 트랜잭션 끝까지 유지

	- UPDATE - 배타락LX 설정

	- 다른 트랜잭션이 설정한 공유락은 읽지만 베타락은 읽지 못함

- **SQL**

	- SET TRACSACTION ISOLATION LEVEL REPEATABLE READ

- **문제점**

	- 유령데이터 읽기

#### SERIALIZABLE

- **LOCK**

	- SELECT - 공유락LS 걸고 트랜잭션 끝까지 유지

	- UPDATE - 배타락LX 설정

	- 다른 트랜잭션이 설정한 공유락은 읽지만 배타락은 읽지 못함
	- 인덱스에 공유락을 설정하여 다른 트랜잭션의 INSERT 문 금지

- **SQL**

	- SET TRACSACTION ISOLATION LEVEL SERIALIZABLE

- **문제점**

	- 없음
