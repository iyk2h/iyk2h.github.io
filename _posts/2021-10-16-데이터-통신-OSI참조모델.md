## OSI 참조모델

국제표준기구 ISO에서 1980년 말경에 정보교환을 위해 필효한 최소한의 네트워크 구조를 제공하는 OSI 기본 참조모델을 제안, 1983년에 국제표준(ISO 7498)으로 제정되었다. 네트워크를 이해하기 위해서 공부해야한다...



ISO에서는 OSI(Open System Interconnection:개방형 시스템 간 상호접속)을 위해 이기종 간 상호접속을 위한 가이드라인을 제시하고자 했다.

### OSI 참조모델의 목표

1. 시스템 간의 통신을 위한 표준 제공과 통신을 방해하는 기술적인 문제들이 제거
2. 단일 시스템 간의 정보교환을 하기 위한 상호접속점을 정의
3. 제품 간의 번거로운 변환 없이 통신할 수 있는 능력을 향상시키기 위해 선택사앙을 축소
4. OSI 참조모델 표준이 모든 요구를 만족하지 못할시, 다른 방법을 사용하는 것에 대한 이유를 제공

### 독립적으로 7계층 구조로 이루어진 OSI 참조모델 목적 

계층 간 명확한 인터페이스 정의는 계층 간 독립성을 제공, 독립성을 유지하며 한 모듈(변경)이 다른 모듈에 미치는 영향을 최소화

### PDU(Protocol Data Unit)

네트워크 구조에서 정보를 실어 나르는 기본 단위

OSI 참조모델의 독립적인 7계층은 PDU의 이름도 독립적이다.

| 계층              | PDU                  | 기능                                                         |
| ----------------- | -------------------- | ------------------------------------------------------------ |
| 7.응용계층        | Message or User data | 사용자에게 서비스 제공, SMTP, FTP, HTTP 등 사용자가 원하는 최종 목표 |
| 6.표현계층        | High-level message   | 데이터 변환, 압축, 암호화                                    |
| 5.세션계층        | Session message      | 통신하는 프로세스 사이의 대화제어 및 동기화 <br />세션의 설정 및 유지 종료 |
| 4.전송계층        | Segment, Datagram    | 네트워크계층에서 패킷을 종단까지 전달한다면 전송층은 종단 내에서 최종 수신 프로세스로 전달을 담당<br /> 분할/재조립, 연결/흐름제어, 오류제어<br />포트 번호 |
| 3.네트워크 계층   | Packet, Datagram     | 소신 측에서 최종목적지까지 패킷 전달<br />송수신 측의 논리주소 지정 및 최종 목적지에 도달하도록 라우팅<br />패킷 단편화<br />IP주소 |
| 2.데이터링크 계층 | Frame                | 노드와 노드 사이의 데이터 전달<br />신뢰성을 더하기 위한 흐름제어, 오류제어<br />MAC 두 개의 서브레이어로 구성 |
| 1.물리계층        | Bits                 | 통신 물리매체를 통해 bit 흐름전송<br />물리적 링크 설정, 유지, 해제 |

### 동등 계층 간의 통신(peer-to-peer)

임의 계층에서 상대와 동일 계층 모듈과 통신하는 프로세스

OSI 참조모델의 N번째 계층에서 다른 시스템의 N번째 계층과 통신하기 위해서는 상위계층의 메시지와 더불어 PCI(Protocol Control Information : 프로토콜 제어정보)를 이용하며 동등계층 간 통신을 위해 각 계층은 헤더 형식으로 해당 계층에 필요한 정보를 전달(테이터링크 계층은 헤더+트레일러)

*헤더 : 데이터 캡술화할 때 데이터 앞에 붙여지는 부가정보( 송수신자의 주소와 연결제어, 에러제어 ,흐름제어를 위한 정보)

*트레일러 : 데이터 캡술화할 때 데이터 뒤에 붙여지는 제어정보(오류검사를 위한 정보)

### 상하 계층 간의 통신

송신장치의 응용계층으로부터 물리계층까지 데이터가 각 계층을 따라 전달되고, 전달된 데이터는 수신장치의 물리계층으로부터 응용계층까지 거슬러 올라간다.

표준용어로 표시한 상하 계층 간의 통신

![image-20211003220634871](../images/image-20211003220634871.png)

| 용어                               | 기능                                                         |
| ---------------------------------- | ------------------------------------------------------------ |
| SUD(Service Data Unit)             | N+1 계층에 의해서 N계층과  N-1계층으로 내용변동 없이 전달되는 사용자 데이트 |
| PCI(Protocol Control information)  | 네트워크의 다른 지역에 있는 같은 동등 계층에게 보내지는 정보, 그 계층에게 어떤 서비스 기능을 수행하도록 지시하는 헤더 |
| PDU(Protocol Data Unit)            | SUD + PCI                                                    |
| ICI(Interface Data Unit)           | 서비스 기능을 호출하기 위해서 N과 N-1계층 사이에서 전달되는 임시 매개 변수 |
| IDU(Interface Control Information) | PCI, SDU, ICI를 포함하는 계층 경계를 통과하여 전달되는 정보의 전체 단위 |

N+1 계층에서 갈라져 나온 ICI는 계층 간의 전달 메시지, 필요한 기능 수행 후 제거

N계층의 PDU는 상대편 N계층에 전달할 PCI와 사용자 데이터인 SDU를 결합하고 하위 계층인 N-1계층으로 전달한 ICI를 덧붙여 N-1 계층에 IDU로 전달

위[PDU](#PDU(Protocol Data Unit))에서
네트워크계층에서 Datagram은 전송계층으로부터 받은 SDU+PCI
데이터계층에서의 Frame은 네트워크 계층으로부터 받은 SDU+PCI

IDU -> SDU, ICI(계층 간의 메시지) -> SDU+PCI(헤더) -> PDU + ICI(계층 간의 메시지) -> IDU -> ...

쉽게 이해하기위해 책의 그림을 가져왔다.

![image-20211003223710579](../images/image-20211003223710579.png)

출처 : 데이터 통신 - 데이터 통신의 다양한 주제를 알기 쉽게 설명한 기본서저자 : 정진욱, 한정수 출판사: 생능출판 출간일: 2017년 11월 30일 출간

위 그림과 같이 계층을 통과할 때마다 해당 계층의 해더가 덧 붙여지고, 이것을 다음 계층에선 사용자 데이터(SUD) 단위가 된다.

Error Check 필드를 추가해 오류 없이 도착했음을 보장하는데 사용

